## [设计模式之美](https://time.geekbang.org/column/intro/250) 王争

- 看书效果
  - 比较偏重理论讲解，脱离真实的开发
- 代码质量维度评判
  - 可维护性 maintainability
    - 代码易维护 在不破坏原有代码设计、不引入新的 bug 的情况下，能够快速地修改或者添加代码
    - 代码不易维护 修改或者添加代码需要冒着极大的引入新 bug 的风险，并且需要花费很长的时间才能完成
    - 如果代码分层清晰、模块化好、高内聚低耦合、遵从基于接口而非实现编程的设计原则等等，那就可能意味着代码易维护
  - 可读性 readability
    - 代码是否符合编码规范、命名是否达意、注释是否详尽、函数是否长短合适、模块划分是否清晰、是否符合高内聚低耦合等等
  - 可扩展性 extensibility
    - 在不修改或少量修改原有代码的情况下，通过扩展的方式添加新的功能代码
  - 灵活性 flexibility
    - 添加一个新的功能代码的时候，原有的代码已经预留好了扩展点，我们不需要修改原有的代码，只要在扩展点上添加新的代码即可
    - 实现一个功能的时候，发现原有代码中，已经抽象出了很多底层可以复用的模块、类等代码，我们可以拿来直接使用
    - 使用某组接口的时候，如果这组接口可以应对各种使用场景，满足各种不同的需求
  - 可复用性 reusability
    - 尽量减少重复代码的编写，复用已有的代码
  - 可测试性 testability

## 面向对象 Object Oriented Programming

- 面向对象编程 一种编程范式或编程风格。以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石
  - 从字面上，按照最简单、最原始的方式来理解，就是将对象或类作为代码组织的基本单元，来进行编程的一种编程范式或者编程风格，并不一定需要封装、抽象、继承、多态这四大特性的支持。
  - 在进行面向对象编程的过程中，人们不停地总结发现，有了这四大特性，能更容易地实现各种面向对象的代码设计思路
- 面向对象编程语言 支持类或对象的语法机制，并有现成的语法机制，能方便地实现面向对象编程四大特性（封装、抽象、继承、多态）的编程语言
  - 只要某种编程语言支持类或对象的语法概念，并且以此作为组织代码的基本单元，那就可以被粗略地认为它就是面向对象编程语言了。至于是否有现成的语法机制，完全地支持了面向对象编程的四大特性、是否对四大特性有所取舍和优化，可以不作为判定的标准
- 一般来讲， 面向对象编程都是通过使用面向对象编程语言来进行的，但是，不用面向对象编程语言， 照样可以进行面向对象编程
- 面向对象分析（OOA） 面向对象设计（OOD）
- 分析和设计两个阶段最终的产出是类的设计，包括程序被拆解为哪些类，每个类有哪些属性方法，类与类之间如何交互等等。比其他的分析和设计更加具体、更加落地、更加贴近编码，更能够顺利地过渡到面向对象编程环节。这也是面向对象分析和设计，与其他分析和设计最大的不同点。
- UML Unified Model Language
  - 《Java Modeling In Color With UML》
  - <https://app.zenuml.com>

### 四大特性

- 封装 Encapsulation 属性与操作隔离 隐藏信息、保护数据
  - 也叫作信息隐藏|数据访问保护
  - 类通过暴露有限访问接口，授权外部仅能通过类提供方式（或者叫函数）来访问内部信息或者数据
  - 属性作为数据自身属性，对调用方没有实际意义
  - 操作是对象的本质，对象的外部呈现
  - 需要编程语言本身提供一定的语法机制访问权限控制来支持
  - 意义
    - 任何代码都可以访问、修改类中的属性，影响代码可读性、可维护性
    - 类通过有限方法暴露必要操作，也能提高类的易用性
    - 把类属性都暴露给类的调用者
      - 调用者想要正确地操作这些属性，就势必要对业务细节有足够的了解。而这对于调用者来说也是一种负担。
      - 如果将属性封装起来，暴露少许的几个必要的方法给调用者使用，调用者就不需要了解太多背后的业务细节，用错的概率就减少很多
- 抽象 Abstraction 隐藏方法的具体实现
  - 让调用者只需要关心方法提供哪些功能，并不需要知道这些功能如何实现
  - 借助编程语言提供的接口类（比如 Java 中的 interface 关键字语法）或者抽象类（比如 Java 中的 abstract 关键字语法）语法机制来实现
  - 并不是一定要为实现类（PictureStorage）抽象出接口类（IPictureStorage），才叫作抽象。即便不编写 IPictureStorage 接口类，单纯的 PictureStorage 类本身就满足抽象特性
    - 类的方法是通过编程语言中的“函数”这一语法机制来实现的。
    - 通过函数包裹具体的实现逻辑，这本身就是一种抽象
    - 调用者在使用函数的时候，并不需要去研究函数内部的实现逻辑，只需要通过函数的命名、注释或者文档，了解其提供了什么功能，就可以直接使用了。比如，在使用 C 语言的 malloc() 函数时，并不需要了解它的底层代码是怎么实现的
    - 抽象概念是一个非常通用的设计思想，并不单单用在面向对象编程中，也可以用来指导架构设计等。而且这个特性也并不需要编程语言提供特殊的语法机制来支持，只需要提供“函数”这一非常基础的语法机制，就可以实现抽象特性、所以，没有很强的“特异性”，有时候并不被看作面向对象编程的特性之一。
  - 意义
    - 作为一种只关注功能点不关注实现的设计思路，帮大脑过滤掉许多非必要信息
    - 作为一个非常宽泛的设计思想，在代码设计中，起到非常重要的指导作用。很多设计原则都体现了抽象这种设计思想
  - 作为概念、理论的存在，不需要具体实践
- 继承 Inheritance
  - 单继承和多继承。单继承表示一个子类只继承一个父类，多继承表示一个子类可以继承多个父类
  - 意义
    - 代码复用
      - 并不是继承所独有的，可以通过其他方式来解决这个代码复用的问题，比如利用组合关系而不是继承关系
    - 通过继承来关联两个类，反应真实世界中的这种关系，非常符合人类的认知，而且，从设计的角度来说，也有一种结构美感
  - 过度使用继承
    - 继承层次过深过复杂，就会导致代码可读性、可维护性变差
    - 子类和父类高度耦合，修改父类的代码，会直接影响到子类
- 多态 Polymorphism
  - 子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现
  - 继承加方法重写
    - 编程语言要支持继承  SortedDynamicArray 继承 DynamicArray，才能将 SortedDyamicArray 传递给 DynamicArray
    - 编程语言要支持子类可以重写（override）父类中方法  SortedDyamicArray 重写 DynamicArray 中 add() 方法
    - 支持父类对象可以引用子类对象，将 SortedDynamicArray 传递给 DynamicArray
  - 利用接口类语法
  - duck-typing 语法,只有一些动态语言才支持
    - Logger 和 DB 两个类没有任何关系，既不是继承关系，也不是接口和实现的关系，但是只要都有定义 record() 方法，就可以被传递到 test() 方法中，在实际运行的时候，执行对应的 record() 方法
    - 一些动态语言所特有的语法机制
  - 意义
    - 提高代码的可扩展性和复用性 将不同集合类型（Array、LinkedList）传递给相同函数,只需要实现一个 print() 函数的逻辑，就能应对各种集合数据打印操作

### 面向对象编程与面向过程编程的区别和联系

### 面向对象分析、面向对象设计、面向对象编程接口和抽象类的区别以及各自的应用场景

### 基于接口而非实现编程的设计思想

### 多用组合少用继承的设计思想

### 面向过程的贫血模型和面向对象的充血模型

## 设计原则

- SOLID 原则
  - SRP 单一职责原则
  - OCP 开闭原则
  - LSP 里式替换原则
  - ISP 接口隔离原则
  - DIP 依赖倒置原则
- DRY 原则、KISS 原则、YAGNI 原则、LOD 法则

## 设计模式

- 创建型
  - 常用：单例模式、工厂模式（工厂方法和抽象工厂）、建造者模式
  - 不常用：原型模式
- 结构型
  - 常用：代理模式、桥接模式、装饰者模式、适配器模式
  - 不常用：门面模式、组合模式、享元模式
- 行为型
  - 常用：观察者模式、模板模式、策略模式、职责链模式、迭代器模式、状态模式
  - 不常用：访问者模式、备忘录模式、命令模式、解释器模式、中介模式。

## 编程规范

- 主要解决的是代码的可读性问题
- 相对于设计原则、设计模式，更加具体、更加偏重代码细节

## 代码重构

- 重构的目的（why）、对象（what）、时机（when）、方法（how）
- 保证重构不出错的技术手段：单元测试和代码的可测试性
- 两种不同规模重构：大重构（大规模高层次）和小重构（小规模低层次）

## 参考

- 《设计模式：可复用面向对象软件的基础 Design Patterns: Elements of Reusable Object-Oriented Software》
